# ============================================================================
#                         ICR 솔루션 사이트 설정 파일
# ============================================================================
#
# 이 파일은 설치/운영의 모든 환경 설정을 관리하는 단일 진실 소스입니다.
# 설치 전 반드시 사이트 환경에 맞게 [필수] 항목들을 수정하세요.
#
# 범례:
#   [필수] - 사이트별 반드시 확인/수정 필요
#   [선택] - 기본값 사용 가능, 필요시 수정
#   [고급] - 특수 상황에서만 수정 (일반적으로 기본값 유지)
#
# ============================================================================


# ╔══════════════════════════════════════════════════════════════════════════╗
# ║  1. 사이트 식별 정보                                                      ║
# ╚══════════════════════════════════════════════════════════════════════════╝

# [필수] 사이트 고유 식별자
# - 로그, 모니터링 등에서 인스턴스 구분용
# 예시: INFODEA, KBANK, SHINHAN, WOORI
SITE=INFODEA

# [필수] Spring Boot 프로파일
# - application.yml에서 적용할 프로파일 선택
# 예시: local, dev, staging, prod, prod-web, prod-batch
ENV=dev


# ╔══════════════════════════════════════════════════════════════════════════╗
# ║  2. 경로 설정                                                             ║
# ╚══════════════════════════════════════════════════════════════════════════╝

# [필수] Java 홈 경로
# - 서버에 설치된 JDK 경로 (java -version으로 확인)
# - Java 17 이상 필수
#
# 예시 (배포판별):
#   /usr/lib/jvm/java-17-openjdk           # RHEL/CentOS OpenJDK
#   /usr/lib/jvm/java-17-openjdk-amd64     # Ubuntu/Debian OpenJDK
#   /usr/lib/jvm/temurin-17                # Eclipse Temurin 17
#   /usr/lib/jvm/temurin-21                # Eclipse Temurin 21
#   /usr/lib/jvm/java-17-amazon-corretto   # Amazon Corretto
#   /opt/java/openjdk                      # 수동 설치
JAVA_HOME=/usr/lib/jvm/temurin-21

# [선택] 설치 기본 경로
# - 모든 ICR 솔루션 파일이 설치될 루트 디렉토리
# - 기본값: /opt/icr-solution
INSTALL_BASE=/opt/icr-solution

# [선택] Tomcat 심볼릭 링크 경로
# - 일반적으로 INSTALL_BASE/tomcat
TOMCAT_HOME=/opt/icr-solution/tomcat

# [선택] 외부 설정 디렉토리
# - Spring Boot 외부 설정 파일 위치
# - 비워두면 INSTALL_BASE/config 사용
ICR_CONFIG_DIR=/opt/icr-solution/config


# ╔══════════════════════════════════════════════════════════════════════════╗
# ║  3. Tomcat 설정                                                          ║
# ╚══════════════════════════════════════════════════════════════════════════╝

# [선택] Tomcat 배포판 이름
# - packages/ 디렉토리에 있는 tgz 파일명 (확장자 제외)
# 예시: apache-tomcat-10.1.40, apache-tomcat-10.1.50
TOMCAT_DIST_NAME=apache-tomcat-10.1.50

# [선택] 앱 배포 디렉토리
# - WAR 파일이 배포되는 위치 (TOMCAT_HOME 기준 상대경로)
# - 기본값: icr-webapps (실제 경로: $TOMCAT_HOME/icr-webapps)
WAS_APP_BASE=icr-webapps


# ╔══════════════════════════════════════════════════════════════════════════╗
# ║  4. 포트 설정                                                             ║
# ╚══════════════════════════════════════════════════════════════════════════╝

# [필수] HTTP 포트
# - 웹 애플리케이션 접속 포트
# - 방화벽 오픈 필요
# 예시: 8080 (기본), 28080, 18080
WAS_HTTP_PORT=28080

# [선택] HTTPS 포트
# - SSL/TLS 암호화 통신 포트
# - WAS_ENABLE_HTTPS=Y 일 때만 사용
# 예시: 8443 (기본), 28443, 443
WAS_HTTPS_PORT=28443

# [고급] Shutdown 포트
# - Tomcat 내부 종료 명령용 (외부 접근 불필요)
# - 동일 서버 다중 인스턴스 시 인스턴스별 다르게 설정
# 예시: 8005 (기본), 8006, 8007
WAS_SHUTDOWN_PORT=8005


# ╔══════════════════════════════════════════════════════════════════════════╗
# ║  5. HTTPS / SSL 설정                                                     ║
# ╚══════════════════════════════════════════════════════════════════════════╝

# [선택] HTTPS 커넥터 활성화
# - Y: HTTPS 사용 (SSL 인증서 필수)
# - N: HTTP만 사용
WAS_ENABLE_HTTPS=Y

# [조건부 필수] SSL 인증서 파일명
# - WAS_ENABLE_HTTPS=Y 일 때 필수
# - 파일 위치: $TOMCAT_HOME/conf/
# - 설치 시 파일 존재 여부 검증됨
#
# 예시:
#   localhost-rsa.jks      # 개발용 샘플 인증서 (운영 사용 금지!)
#   company-ssl.jks        # 실제 발급받은 인증서
#   wildcard-2025.pfx      # 와일드카드 인증서
WAS_SSL_KEYSTORE_FILE=localhost-rsa.jks

# [조건부 필수] SSL 인증서 비밀번호
# - WAS_ENABLE_HTTPS=Y 일 때 필수
# - 인증서 발급 시 설정한 비밀번호
#
# [주의] 운영환경에서는 반드시 실제 인증서와 비밀번호로 교체!
#        기본값(localhost-rsa.jks + changeit)은 개발용 샘플입니다.
WAS_SSL_KEYSTORE_PASSWORD=changeit


# ╔══════════════════════════════════════════════════════════════════════════╗
# ║  6. JVM 설정                                                             ║
# ╚══════════════════════════════════════════════════════════════════════════╝

# [선택] 힙 메모리 초기 크기
# - 애플리케이션 시작 시 할당되는 메모리
# 예시: 256m, 512m, 1g, 2g
JVM_XMS=512m

# [선택] 힙 메모리 최대 크기
# - 서버 가용 메모리의 50-70% 권장
# 예시: 512m, 1024m, 2g, 4g
JVM_XMX=1024m

# [선택] 타임존
# - 날짜/시간 처리 기준 시간대
# 예시: Asia/Seoul, UTC, America/New_York
JVM_TIMEZONE=Asia/Seoul

# [선택] 파일 인코딩
# - 파일 I/O 기본 문자셋
# 예시: UTF-8, EUC-KR
JVM_ENCODING=UTF-8


# ╔══════════════════════════════════════════════════════════════════════════╗
# ║  7. 보안 설정                                                             ║
# ╚══════════════════════════════════════════════════════════════════════════╝

# [필수] Jasypt 암호화 키
# - application.yml 내 암호화된 값(ENC(...)) 복호화용
# - 운영환경별 고유 키 사용 권장
#
# [주의] 이 키가 노출되면 암호화된 모든 값이 복호화됩니다.
JASYPT_ENCRYPTOR_PASSWORD='ERFOCUS-DB-SECRET-KEY-2025!'


# ╔══════════════════════════════════════════════════════════════════════════╗
# ║  8. 서비스 제어 설정 (고급)                                                ║
# ╚══════════════════════════════════════════════════════════════════════════╝

# [고급] 시작 대기 시간 (초)
# - Tomcat 시작 후 프로세스 감지까지 최대 대기
# - 느린 서버나 무거운 앱은 증가 필요
SVC_START_TIMEOUT_SEC=30

# [고급] 종료 대기 시간 (초)
# - shutdown.sh 실행 후 종료 감지까지 최대 대기
SVC_STOP_TIMEOUT_SEC=30

# [고급] 강제 종료 허용
# - Y: 타임아웃 시 kill -9로 강제 종료
# - N: 타임아웃 시 에러 발생
SVC_STOP_FORCEKILL=Y

# [고급] 강제 종료 후 대기 (초)
# - kill 후 프로세스 정리 대기 시간
SVC_STOP_FORCEKILL_GRACE_SEC=1
